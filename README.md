# JonnyMCP 桌面工具集

## 项目简介

JonnyMCP是一个基于Python的桌面工具集，采用MVP架构设计，提供文件整理、应用启动等实用功能。该项目使用面向对象编程原则和设计模式，具有良好的可维护性和可扩展性。

## 功能特性

- **桌面文件列表**: 获取桌面上的所有文件
- **桌面文件整理**: 根据文件类型自动分类整理桌面文件
- **应用程序启动**: 打开谷歌浏览器等应用程序
- **个性化问候**: 生成中英双语个性化问候语

## 项目架构

项目采用MVP(Model-View-Presenter)架构模式，分为以下几层:

```
JonnyMCP
├── Models      - 数据模型层
├── Views       - 视图层
├── Presenters  - 表示层
├── Services    - 服务层
└── Utils       - 工具类
```

### 架构图

```
┌───────────────┐     ┌────────────────┐     ┌──────────────┐
│     Model     │◄────┤    Presenter   │◄────┤     View     │
│  (数据模型)    │     │   (业务逻辑)    │     │   (界面)     │
└───────┬───────┘     └────────┬───────┘     └──────────────┘
        │                      │                      ▲
        │                      │                      │
        │                      ▼                      │
        │             ┌────────────────┐              │
        └────────────►│    Service     │──────────────┘
                      │   (服务实现)    │
                      └────────────────┘
```

## 代码结构

```
/
├── models/                 # 数据模型层
│   ├── __init__.py
│   └── file_model.py       # 文件和文件类型模型
├── views/                  # 视图层
│   ├── __init__.py
│   └── mcp_view.py         # MCP视图接口和实现
├── presenters/             # 表示层
│   ├── __init__.py
│   └── mcp_presenter.py    # MCP表示层
├── services/               # 服务层
│   ├── __init__.py
│   ├── file_service.py     # 文件服务
│   └── app_service.py      # 应用服务
├── utils/                  # 工具类
│   ├── __init__.py
│   └── config.py           # 配置工具
├── mcp_app.py              # 主程序
├── custom_mcp.py           # 原始文件(保留作参考)
├── development_log.md      # 开发日志
└── README.md               # 项目说明文档
```

## 类图

```
┌───────────────────┐     ┌────────────────────┐     ┌───────────────────┐
│    FileModel      │     │      FileType      │     │   AppService      │
├───────────────────┤     ├────────────────────┤     ├───────────────────┤
│ - path            │     │ + IMAGES           │     │ + open_application│
│ - name            │     │ + DOCUMENTS        │     └───────────────────┘
│ - extension       │     │ + ARCHIVES         │
│ - type            │     │ + ...              │     ┌───────────────────┐
├───────────────────┤     ├────────────────────┤     │   FileService     │
│ + is_hidden       │     │ + get_extension_map│     ├───────────────────┤
│ + is_directory    │     │ + get_type_by_ext  │     │ + list_desktop    │
└───────────────────┘     └────────────────────┘     │ + organize_files  │
                                                     │ + move_file       │
┌───────────────────┐     ┌────────────────────┐     │ + create_directory│
│    IMcpView       │     │   McpPresenter     │     └───────────────────┘
├───────────────────┤     ├────────────────────┤
│ + show_file_list  │◄────┤ - view             │     ┌───────────────────┐
│ + show_result     │     │ - file_service     │     │     Config        │
│ + show_app_result │     │ - app_service      │     ├───────────────────┤
│ + show_greeting   │     ├────────────────────┤     │ + get_app_config  │
└───────────────────┘     │ + list_files       │     └───────────────────┘
        ▲                 │ + organize_files   │
        │                 │ + open_chrome      │
┌───────────────────┐     │ + say_hello        │
│     McpView       │     └────────────────────┘
├───────────────────┤
│ + show_file_list  │
│ + show_result     │
│ + show_app_result │
│ + show_greeting   │
└───────────────────┘
```

## 时序图

### 文件整理功能时序

```
┌─────────┐    ┌────────────┐    ┌──────────────┐    ┌────────────┐
│ MCP工具  │    │ Presenter  │    │ FileService  │    │  McpView   │
└────┬────┘    └─────┬──────┘    └──────┬───────┘    └─────┬──────┘
     │               │                   │                  │
     │  organize()   │                   │                  │
     │───────────────>                   │                  │
     │               │                   │                  │
     │               │ organize_files()  │                  │
     │               │───────────────────>                  │
     │               │                   │                  │
     │               │                   │  创建分类文件夹    │
     │               │                   │──────────────────>
     │               │                   │                  │
     │               │                   │   获取文件列表     │
     │               │                   │──────────────────>
     │               │                   │                  │
     │               │                   │   分类并移动文件   │
     │               │                   │──────────────────>
     │               │                   │                  │
     │               │ 返回结果(count,errors) │             │
     │               │<───────────────────                  │
     │               │                   │                  │
     │               │               show_result(count,errors)
     │               │─────────────────────────────────────>
     │               │                   │                  │
     │               │                   │           格式化结果
     │               │                   │                  │
     │               │                返回结果字符串         │
     │               │<─────────────────────────────────────
     │  返回结果字符串 │                   │                  │
     │<───────────────                   │                  │
     │               │                   │                  │
```

### 打开应用程序时序

```
┌─────────┐    ┌────────────┐    ┌──────────────┐    ┌────────────┐
│ MCP工具  │    │ Presenter  │    │ AppService   │    │  McpView   │
└────┬────┘    └─────┬──────┘    └──────┬───────┘    └─────┬──────┘
     │               │                   │                  │
     │ open_chrome() │                   │                  │
     │───────────────>                   │                  │
     │               │                   │                  │
     │               │  open_chrome()    │                  │
     │               │───────────────────>                  │
     │               │                   │                  │
     │               │                open_application("Chrome")
     │               │                   │                  │
     │               │                   │     执行系统命令   │
     │               │                   │──────────────────>
     │               │                   │                  │
     │               │             返回结果(success,error)   │
     │               │<───────────────────                  │
     │               │                   │                  │
     │               │         show_app_result(success,error)
     │               │─────────────────────────────────────>
     │               │                   │                  │
     │               │                   │           格式化结果
     │               │                   │                  │
     │               │                返回结果字符串         │
     │               │<─────────────────────────────────────
     │  返回结果字符串 │                   │                  │
     │<───────────────                   │                  │
     │               │                   │                  │
```

## 使用方法

1. 启动MCP服务：
```bash
python3 mcp_app.py
```

2. 调用MCP工具：
```python
# 列出桌面文件
list_desktop_files()

# 整理桌面文件
create_folder_and_move_files()

# 打开谷歌浏览器
open_chrome()

# 生成问候语
say_hello("Jonny")
```

## 开发日志

请参考 [development_log.md](development_log.md) 了解项目的开发历程。

## 扩展与优化

- 添加更多文件类型支持
- 实现依赖注入
- 添加单元测试
- 添加日志系统
- 支持更多应用程序的启动
- 支持Windows和Linux系统 